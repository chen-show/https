(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31b4ce18"],{1925:function(t,a,e){"use strict";e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return i}));var s=e("b775");function n(t,a,e,n){return Object(s["a"])({url:"/search",method:"get",params:{keywords:t,limit:a,offset:e,type:n}})}function i(t){return Object(s["a"])({url:"/search/suggest",method:"get",params:{keywords:t,type:"mobile"}})}},"1f38":function(t,a,e){},"5bf7":function(t,a,e){"use strict";e("1f38")},ace4:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"container",staticClass:"search-content"},[e("div",{staticClass:"title-wrap"},[e("h2",{staticClass:"title"},[t._v(t._s(t.$route.query.keywords))]),e("span",{staticClass:"sub-title"},[t._v("找到"+t._s(t.total)+"个结果")])]),e("el-tabs",{model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},[e("el-tab-pane",{attrs:{label:"歌曲",name:"1"}},[e("table",{staticClass:"el-table"},[e("thead",[e("th"),e("th",[t._v("音乐标题")]),e("th",[t._v("歌手")]),e("th",[t._v("专辑")]),e("th",[t._v("时长")])]),e("tbody",t._l(t.songList,(function(a,s){return e("tr",{key:a.id,staticClass:"el-table__row",on:{dblclick:function(e){return t.rowDbclick(a.id)}}},[e("td",[t._v(t._s(s+1))]),e("td",[e("div",{staticClass:"song-wrap"},[e("div",{staticClass:"name-wrap"},[e("span",{staticClass:"name"},[t._v(t._s(a.name))]),0!=a.mvid?e("span",{staticClass:"iconfont icon-mv",on:{click:function(e){return t.toMV(a.mvid)}}}):t._e()]),0!=a.alias.length?e("span",{staticClass:"sub-name"},[t._v(t._s(a.alias[0]))]):t._e()])]),e("td",[t._v(t._s(a.artists[0].name))]),e("td",[t._v(t._s(a.album.name))]),e("td",[t._v(t._s(t._f("formatDuration")(a.duration)))])])})),0)])]),e("el-tab-pane",{attrs:{label:"歌单",name:"1000"}},[e("div",{staticClass:"items"},t._l(t.playList,(function(a){return e("div",{key:a.id,staticClass:"item",on:{click:function(e){return t.toPlaylist(a.id)}}},[e("div",{staticClass:"img-wrap"},[e("div",{staticClass:"num-wrap"},[t._v(" 播放量: "),e("span",{staticClass:"num"},[t._v(t._s(t._f("formatCount")(a.playCount)))])]),e("img",{attrs:{src:a.coverImgUrl,alt:""}}),e("span",{staticClass:"iconfont icon-play el-icon-video-play"})]),e("p",{staticClass:"name"},[t._v(t._s(a.name))])])})),0)]),e("el-tab-pane",{attrs:{label:"MV",name:"1004"}},[e("div",{staticClass:"items mv"},t._l(t.mvList,(function(a){return e("div",{key:a.id,staticClass:"item",on:{click:function(e){return t.toMV(a.id)}}},[e("div",{staticClass:"img-wrap"},[e("img",{attrs:{src:a.cover,alt:""}}),e("span",{staticClass:"iconfont icon-play el-icon-video-play"}),e("div",{staticClass:"num-wrap"},[e("div",{staticClass:"iconfont icon-play"}),e("div",{staticClass:"num"},[t._v(t._s(t._f("formatCount")(a.playCount)))])]),e("span",{staticClass:"time"},[t._v(t._s(t._f("formatDuration")(a.duration)))])]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"name"},[t._v(t._s(a.name))]),e("div",{staticClass:"singer"},[t._v(t._s(a.artistName))])])])})),0)])],1),e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page,"page-size":t.limit},on:{"current-change":t.handleCurrentChange}})],1)},n=[],i=(e("96cf"),e("1da1")),r=e("1925"),c=e("3191"),l=e("d8ad"),o={name:"SearchIndex",components:{},props:{},data:function(){return{type:"1",limit:80,page:1,total:0,songList:[],playList:[],mvList:[],searchText:""}},computed:{},watch:{searchText:function(){this.searchResult()},type:[function(){this.limit="1004"===this.type?80:60},"searchResult"],"$route.query.keywords":"searchResult"},created:function(){this.OnBus(),this.searchText=this.$route.params.keywords,this.searchResult()},mounted:function(){},methods:{OnBus:function(){var t=this;l["a"].$on("searchText",(function(a){t.searchText=a}))},toPlaylist:function(t){this.$router.push({name:"playlist",params:{id:t}})},rowDbclick:function(t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["a"])(t);case 2:return e=a.sent,a.next=5,Object(c["e"])(t);case 5:s=a.sent,l["a"].$emit("songurl",s.data.data[0].url,e.data.lrc.lyric);case 7:case"end":return a.stop()}}),a)})))()},toMV:function(t){this.$router.push({name:"mv",params:{id:t}})},handleCurrentChange:function(t){this.page=t,this.searchResult()},searchResult:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.limit,s=t.type,n=t.page,a.next=3,Object(r["a"])(t.searchText,e,(n-1)*e,s);case 3:i=a.sent,a.t0=t.type,a.next="1"===a.t0?7:"1000"===a.t0?10:13;break;case 7:return t.songList=i.data.result.songs,t.total=i.data.result.songCount,a.abrupt("break",16);case 10:return t.playList=i.data.result.playlists,t.total=i.data.result.playlistCount,a.abrupt("break",16);case 13:return t.mvList=i.data.result.mvs,t.total=i.data.result.mvCount,a.abrupt("break",16);case 16:case"end":return a.stop()}}),a)})))()}}},u=o,p=(e("5bf7"),e("2877")),d=Object(p["a"])(u,s,n,!1,null,"334f320e",null);a["default"]=d.exports}}]);